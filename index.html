<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chessboard</title>
    <script>
        // Redirect to landing page if no side chosen yet
        (function(){
            try {
                const params = new URLSearchParams(window.location.search);
                const hasSide = params.has('side');
                const stored = localStorage.getItem('playerColor');
                if (!hasSide && !stored) {
                    window.location.replace('landing.html');
                }
            } catch(e) {
                window.location.replace('landing.html');
            }
        })();
    </script>
    <!-- Tailwind CDN for utility classes (odd/even row styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css?v=20250903d">
</head>
<body>
    <div class="app-layout">
        <div class="board-wrapper" style="position:relative;display:inline-block;">
            <div class="chessboard">
                <!-- Chessboard squares and pieces will be dynamically added here -->
            </div>
            <div id="clock-black" class="clock side-clock clock-top" data-color="Black" aria-label="Black clock" style="display:none;">
                <span class="clock-label">Black</span><span class="time">00:00</span>
            </div>
            <div id="clock-white" class="clock side-clock clock-bottom" data-color="White" aria-label="White clock" style="display:none;">
                <span class="clock-label">White</span><span class="time">00:00</span>
            </div>
        </div>
        <aside id="move-panel" aria-label="Move history panel">
            <div class="panel-header" style="display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px;">
                <h3 style="margin:0;">Move History</h3>
                <div class="theme-toggle">
                    <input type="checkbox" id="theme-toggle" aria-label="Toggle dark mode">
                    <label for="theme-toggle" class="theme-toggle-label" title="Toggle dark mode">
                        <span class="icon sun" aria-hidden="true">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4a1 1 0 0 1-1-1V2a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1zm0 18a1 1 0 0 1-1-1v-1a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1zm10-10a1 1 0 0 1-1 1h-1a1 1 0 1 1 0-2h1a1 1 0 0 1 1 1zM6 12a1 1 0 0 1-1 1H4a1 1 0 1 1 0-2h1a1 1 0 0 1 1 1zm11.657-6.657a1 1 0 0 1 0 1.414L17.414 8a1 1 0 0 1-1.414-1.414l.243-.243a1 1 0 0 1 1.414 0zm-9.9 9.9a1 1 0 0 1 0 1.414L7.514 17.9A1 1 0 0 1 6.1 16.485l.243-.243a1 1 0 0 1 1.414 0zm9.9 1.414a1 1 0 0 1-1.414 0l-.243-.243A1 1 0 0 1 17.314 15.1l1.243 1.243a1 1 0 0 1 0 1.414zm-9.9-9.9a1 1 0 0 1-1.414 0l-.243-.243A1 1 0 0 1 7.515 6.1l1.243 1.243a1 1 0 0 1 0 1.414zM12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z"/></svg>
                        </span>
                        <span class="icon moon" aria-hidden="true">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 0 1 11.21 3 7 7 0 1 0 21 12.79z"/></svg>
                        </span>
                        <span class="knob" aria-hidden="true"></span>
                    </label>
                </div>
            </div>
            <div class="history-wrapper">
                <table id="history-table" class="history-table w-full" aria-live="polite">
                    <thead>
                        <tr><th class="w-8">#</th><th>White</th><th>Black</th></tr>
                    </thead>
                    <tbody id="history-body" class="text-sm"></tbody>
                </table>
            </div>
            <div class="nav-controls" style="display:flex;gap:6px;margin-top:6px;flex-wrap:wrap;">
                <button id="nav-first" type="button" class="nav-btn" title="First position" aria-label="First Position">⏮️</button>
                <button id="nav-prev" type="button" class="nav-btn" title="Previous position" aria-label="Previous Position">◀️</button>
                <button id="nav-next" type="button" class="nav-btn" title="Next position" aria-label="Next Position">▶️</button>
                <button id="nav-last" type="button" class="nav-btn" title="Latest position" aria-label="Latest Position">⏭️</button>
            </div>
            <div id="result-banner" class="result-banner" role="status" aria-live="polite"></div>
        </aside>
    </div>
    <script src="script.js?v=20250903d"></script>
</body>
</html>